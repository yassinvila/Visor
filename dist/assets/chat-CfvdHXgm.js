import{j as e,r,c as x}from"./index-D6HAasR3.js";const w=({isConnected:t=!1})=>{const s=()=>{typeof window<"u"&&window.visor?.window?.close&&window.visor.window.close()};return e.jsx("div",{className:"chat-header",style:{WebkitAppRegion:"drag"},children:e.jsxs("div",{className:"header-content",children:[e.jsxs("div",{className:"header-title",children:[e.jsx("span",{className:"chat-status-dot","data-connected":t}),e.jsx("span",{children:"Visor Copilot"})]}),e.jsx("button",{className:"close-button",onClick:s,title:"Close",style:{WebkitAppRegion:"no-drag"},children:e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:e.jsx("path",{d:"M1 1L11 11M1 11L11 1",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})})]})})},g=({messages:t,isTyping:s})=>{const o=r.useRef(null),n=()=>{o.current?.scrollIntoView({behavior:"smooth"})};return r.useEffect(()=>{n()},[t,s]),e.jsxs("div",{className:"message-list",children:[t.map(a=>e.jsx("div",{className:`message ${a.role}`,children:e.jsx("div",{className:"message-bubble",children:e.jsx("div",{className:"message-text",children:a.content})})},a.id)),s&&e.jsx("div",{className:"message assistant",children:e.jsx("div",{className:"message-bubble",children:e.jsxs("div",{className:"typing-indicator",children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]})})}),e.jsx("div",{ref:o})]})},j=({onSendMessage:t})=>{const[s,o]=r.useState(""),n=()=>{s.trim()&&(t(s.trim()),o(""))},a=i=>{i.key==="Enter"&&!i.shiftKey&&(i.preventDefault(),n())};return e.jsx("div",{className:"chat-input",children:e.jsxs("div",{className:"input-container",children:[e.jsx("textarea",{value:s,onChange:i=>o(i.target.value),onKeyDown:a,placeholder:"Ask anything",rows:1,className:"input-field"}),e.jsx("button",{onClick:n,disabled:!s.trim(),className:"send-button",title:"Send message",children:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M7 11L12 6L17 11M12 18V7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})})]})})},f=[{id:"c1",role:"assistant",content:"Hi! What workflow should we tackle?",timestamp:new Date}],v=()=>{const[t,s]=r.useState(f),[o,n]=r.useState(!1),[a,i]=r.useState(!1),c=typeof window<"u"?window.visor?.chat:void 0;r.useEffect(()=>{let l;return(async()=>{i(!!c)})(),c?.onMessage&&(l=c.onMessage(d=>{s(p=>[...p,{...d,timestamp:new Date}]),n(!1)})),()=>l?.()},[c]);const u=async l=>{const h={id:crypto.randomUUID(),role:"user",content:l.trim(),timestamp:new Date};s(d=>[...d,h]),n(!0),c?.sendMessage?.(h.content),c?.sendMessage||window.setTimeout(()=>{s(d=>[...d,{id:crypto.randomUUID(),role:"assistant",content:"Working on it! I will highlight the next action on screen.",timestamp:new Date}]),n(!1)},1e3)};return e.jsxs("div",{className:"app-container",children:[e.jsx(w,{isConnected:a}),e.jsx(g,{messages:t,isTyping:o}),e.jsx(j,{onSendMessage:u})]})},m=document.getElementById("root");if(!m)throw new Error("Chat root element not found");const y=x.createRoot(m);y.render(e.jsx(v,{}));
