import{j as n,r as a,c as E}from"./components-CtyU-WJp.js";const v=({variant:i="primary",className:c="",...r})=>{const l=["visor-button",i==="ghost"?"visor-button--ghost":"visor-button--primary",c].filter(Boolean).join(" ");return n.jsx("button",{className:l,...r})},b=[{id:"step-1",title:"Open Settings",description:"Click the gear icon to open the settings drawer.",actionHint:"Look for the small gear on the top right.",annotation:"circle",target:{x:1180,y:40,width:48,height:48}},{id:"step-2",title:"Enable Feature",description:'Toggle on "Guided Mode".',actionHint:"The switch will turn blue when active.",annotation:"arrow",target:{x:1050,y:220,width:180,height:50}}],M=()=>{var u;const[i,c]=a.useState([]),[r,l]=a.useState(0),t=typeof window<"u"?(u=window.visor)==null?void 0:u.overlay:void 0,s=i[r],m=i.slice(r);a.useEffect(()=>{i.length===0&&c(b)},[i.length]),a.useEffect(()=>{var f,j,w;if(!t)return;(f=t.ready)==null||f.call(t);const e=(j=t.onStepUpdate)==null?void 0:j.call(t,d=>{c(x=>{const g=x.findIndex(h=>h.id===d.id);if(g>=0){const h=[...x];return h[g]=d,h}return[...x,d]})}),o=(w=t.onReset)==null?void 0:w.call(t,()=>{c([]),l(0)});return()=>{e==null||e(),o==null||o()}},[t]);const N=a.useCallback(()=>{var e;s&&((e=t==null?void 0:t.markDone)==null||e.call(t,s.id),l(o=>Math.min(o+1,i.length-1)))},[s,t,i.length]),p=a.useCallback(e=>{var o;(o=t==null?void 0:t.setPointerMode)==null||o.call(t,e)},[t]);return n.jsx("div",{className:"overlay-shell",children:n.jsxs("section",{className:"overlay-card",onMouseEnter:()=>p("interactive"),onMouseLeave:()=>p("passthrough"),children:[n.jsx("p",{className:"overlay-label",children:"Next steps"}),n.jsx("h1",{className:"overlay-title",children:(s==null?void 0:s.title)??"Waiting for instructions"}),n.jsx("p",{className:"overlay-text",children:(s==null?void 0:s.description)??"Trigger a task from the chat window to get started."}),m.length>0&&n.jsx("ol",{className:"overlay-step-list",children:m.map((e,o)=>n.jsxs("li",{className:o===0?"overlay-step-active":"",children:[n.jsx("strong",{children:e.title}),n.jsx("span",{children:e.description})]},e.id))}),n.jsx(v,{onClick:N,disabled:!s,children:"Done"})]})})},k=document.getElementById("root");if(!k)throw new Error("Overlay root element not found");const C=E(k);C.render(n.jsx(M,{}));
