import{r as a,j as s,L as g,V as b,c as S}from"./loadingSpinner-YBlTTw5d.js";const v=[{id:"c1",role:"assistant",content:"Hi! What workflow should we tackle?"}],y=()=>{var p;const[h,r]=a.useState(v),[c,u]=a.useState("Show me how to create a Jira ticket."),[j,l]=a.useState(!1),[m,f]=a.useState(!1),e=typeof window<"u"?(p=window.visor)==null?void 0:p.chat:void 0,i=a.useRef(null);a.useEffect(()=>{var t;(t=i.current)==null||t.scrollTo({top:i.current.scrollHeight})},[h]),a.useEffect(()=>{let t;return(async()=>{if(!(e!=null&&e.loadHistory)){f(!1);return}const n=await e.loadHistory();n!=null&&n.length&&r(n),f(!0)})(),e!=null&&e.onMessage&&(t=e.onMessage(n=>{r(o=>[...o,n])})),()=>t==null?void 0:t()},[e]);const w=t=>{var n;if(t.preventDefault(),!c.trim())return;const d={id:crypto.randomUUID(),role:"user",content:c.trim()};if(r(o=>[...o,d]),u(""),l(!0),(n=e==null?void 0:e.sendMessage)==null||n.call(e,d.content),!(e!=null&&e.sendMessage)){window.setTimeout(()=>{r(o=>[...o,{id:crypto.randomUUID(),role:"assistant",content:"Working on it! I will highlight the next action on screen."}]),l(!1)},600);return}l(!1)};return s.jsxs("div",{className:"chat-shell",children:[s.jsxs("header",{className:"chat-header",children:[s.jsxs("div",{children:[s.jsx("p",{className:"chat-label",children:"Visor Copilot"}),s.jsx("h1",{children:"Describe the task you need help with"})]}),s.jsx("span",{className:`status-pill ${m?"connected":"disconnected"}`,children:m?"Connected":"Offline mock"})]}),s.jsxs("div",{className:"chat-messages",ref:i,children:[h.map(t=>s.jsx("article",{className:`chat-bubble chat-${t.role}`,children:s.jsx("p",{children:t.content})},t.id)),j&&s.jsx("div",{className:"chat-bubble chat-assistant",children:s.jsx(g,{label:"Visor thinking"})})]}),s.jsxs("form",{className:"chat-input",onSubmit:w,children:[s.jsx("textarea",{value:c,onChange:t=>u(t.target.value),placeholder:"Example: Walk me through updating Salesforce lead status",rows:3}),s.jsx("div",{className:"chat-actions",children:s.jsx(b,{type:"submit",disabled:!c.trim(),children:"Ask Visor"})})]})]})},x=document.getElementById("root");if(!x)throw new Error("Chat root element not found");const k=S(x);k.render(s.jsx(y,{}));
