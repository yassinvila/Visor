import{r as o,j as e,L as w,c as y}from"./loadingSpinner-Ba4fKjup.js";const g=[{id:"c1",role:"assistant",content:"Hi! What workflow should we tackle?"}],N=()=>{var b;const[u,l]=o.useState(g),[c,h]=o.useState("Show me how to create a Jira ticket."),[f,r]=o.useState(!1),[x,m]=o.useState(!1),t=typeof window<"u"?(b=window.visor)==null?void 0:b.chat:void 0,i=o.useRef(null);o.useEffect(()=>{var s;(s=i.current)==null||s.scrollTo({top:i.current.scrollHeight})},[u]),o.useEffect(()=>{let s;return(async()=>{if(!(t!=null&&t.loadHistory)){m(!1);return}const n=await t.loadHistory();n!=null&&n.length&&l(n),m(!0)})(),t!=null&&t.onMessage&&(s=t.onMessage(n=>{l(a=>[...a,n])})),()=>s==null?void 0:s()},[t]);const j=s=>{var n;if(s.preventDefault(),!c.trim())return;const d={id:crypto.randomUUID(),role:"user",content:c.trim()};if(l(a=>[...a,d]),h(""),r(!0),(n=t==null?void 0:t.sendMessage)==null||n.call(t,d.content),!(t!=null&&t.sendMessage)){window.setTimeout(()=>{l(a=>[...a,{id:crypto.randomUUID(),role:"assistant",content:"Working on it! I will highlight the next action on screen."}]),r(!1)},600);return}r(!1)};return e.jsxs("div",{className:"chat-shell",children:[e.jsxs("header",{className:"chat-header",children:[e.jsx("span",{className:"chat-status-dot","data-connected":x}),e.jsx("p",{children:"Visor Copilot"})]}),e.jsxs("div",{className:"chat-messages",ref:i,children:[u.map(s=>e.jsx("article",{className:`chat-bubble chat-${s.role}`,children:e.jsx("p",{children:s.content})},s.id)),f&&e.jsx("div",{className:"chat-bubble chat-assistant",children:e.jsx(w,{label:"Visor thinking"})})]}),e.jsxs("form",{className:"chat-input-bar",onSubmit:j,children:[e.jsx("button",{type:"button",className:"icon-button","aria-label":"Add attachment",children:"+"}),e.jsx("button",{type:"button",className:"icon-button","aria-label":"Choose model",children:"ðŸŒ"}),e.jsx("button",{type:"button",className:"icon-button","aria-label":"Enable recording",children:"ðŸŽ™ï¸"}),e.jsx("input",{type:"text",value:c,onChange:s=>h(s.target.value),placeholder:"Ask anything"}),e.jsx("button",{type:"button",className:"icon-button","aria-label":"Voice input",children:"ðŸ”˜"}),e.jsx("button",{type:"submit",className:"send-button",disabled:!c.trim(),children:"â†‘"})]})]})},p=document.getElementById("root");if(!p)throw new Error("Chat root element not found");const S=y(p);S.render(e.jsx(N,{}));
