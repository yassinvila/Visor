import{j as e,r as a,c as S}from"./components-CtyU-WJp.js";const v=({label:l="Loadingâ€¦"})=>e.jsxs("div",{className:"loading-spinner",children:[e.jsx("span",{className:"loading-spinner__icon","aria-hidden":"true"}),e.jsx("span",{children:l})]}),C=[{id:"c1",role:"assistant",content:"Hi! What workflow should we tackle?"}],E=()=>{var f;const[l,c]=a.useState(C),[i,h]=a.useState("Show me how to create a Jira ticket."),[g,r]=a.useState(!1),[w,p]=a.useState(!1),[m,b]=a.useState(!1),t=typeof window<"u"?(f=window.visor)==null?void 0:f.chat:void 0,d=a.useRef(null);a.useEffect(()=>{var s;(s=d.current)==null||s.scrollTo({top:d.current.scrollHeight})},[l]),a.useEffect(()=>{let s;return(async()=>{if(!(t!=null&&t.loadHistory)){p(!1);return}const n=await t.loadHistory();n!=null&&n.length&&c(n),p(!0)})(),t!=null&&t.onMessage&&(s=t.onMessage(n=>{c(o=>[...o,n])})),()=>s==null?void 0:s()},[t]);const y=s=>{var n;if(s.preventDefault(),!i.trim())return;const u={id:crypto.randomUUID(),role:"user",content:i.trim()};if(c(o=>[...o,u]),h(""),r(!0),(n=t==null?void 0:t.sendMessage)==null||n.call(t,u.content),!(t!=null&&t.sendMessage)){window.setTimeout(()=>{c(o=>[...o,{id:crypto.randomUUID(),role:"assistant",content:"Working on it! I will highlight the next action on screen."}]),r(!1)},600);return}r(!1)},x=()=>b(!0),N=()=>b(!1);return e.jsx("div",{className:"chat-shell",children:e.jsxs("div",{className:`chat-panel ${m?"expanded":"collapsed"} no-drag`,children:[m&&e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"chat-header",children:[e.jsx("span",{className:"chat-status-dot","data-connected":w}),e.jsx("p",{children:"Visor Copilot"}),e.jsx("button",{type:"button",className:"icon-button",onClick:N,"aria-label":"Collapse panel",children:"âŒ„"})]}),e.jsxs("div",{className:"chat-messages",ref:d,children:[l.map(s=>e.jsx("article",{className:`chat-bubble chat-${s.role}`,children:e.jsx("p",{children:s.content})},s.id)),g&&e.jsx("div",{className:"chat-bubble chat-assistant",children:e.jsx(v,{label:"Visor thinking"})})]})]}),e.jsxs("form",{className:"chat-input-bar",onSubmit:y,onFocus:x,onClick:x,children:[e.jsx("button",{type:"button",className:"icon-button","aria-label":"Add attachment",children:"+"}),e.jsx("button",{type:"button",className:"icon-button","aria-label":"Choose model",children:"ðŸŒ"}),e.jsx("button",{type:"button",className:"icon-button","aria-label":"Enable recording",children:"ðŸŽ™ï¸"}),e.jsx("input",{type:"text",value:i,onChange:s=>h(s.target.value),placeholder:"Ask anything"}),e.jsx("button",{type:"button",className:"icon-button","aria-label":"Voice input",children:"ðŸ”˜"}),e.jsx("button",{type:"submit",className:"send-button",disabled:!i.trim(),children:"â†‘"})]})]})})},j=document.getElementById("root");if(!j)throw new Error("Chat root element not found");const k=S(j);k.render(e.jsx(E,{}));
